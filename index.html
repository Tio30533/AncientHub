<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Ancient Hub</title>
<style>
:root {
  --bg: #1a1e30;
  --fg: #fff;
  --muted: #d1d1d1;
  --pane: #121626;
  --pane2: #0f1322;
  --kw: #569cd6;
  --str: #ce9178;
  --com: #6a9955;
  --num: #b5cea8;
}

* { box-sizing: border-box; }

body {
  margin: 0;
  font-family: Roboto, Arial, sans-serif;
  background-color: var(--bg);
  color: var(--fg);
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 100vh;
}

.container {
  text-align: center;
  padding: 20px;
  width: min(900px, 92vw);
}

.brand-text {
  font-size: 18px;
  font-weight: 600;
  color: var(--fg);
  margin-top: 5px;
}

h1 { font-size: 22px; margin: 0 0 10px; }
p { font-size: 14px; color: var(--muted); margin: 6px 0 16px; }

.editor {
  position: relative;
  text-align: left;
  border-radius: 10px;
  background: linear-gradient(180deg, var(--pane), var(--pane2));
  padding: 14px 44px 14px 14px;
  overflow: auto;
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.06);
}

pre { margin: 0; white-space: pre; overflow: auto; }
code { font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; font-size: 14px; line-height: 1.5; }

.kw { color: var(--kw); font-weight: 600; }
.str { color: var(--str); }
.com { color: var(--com); font-style: italic; }
.num { color: var(--num); }

.copy {
  position: absolute;
  top: 8px;
  right: 8px;
  border: 0;
  border-radius: 8px;
  background: #2a3150;
  color: #fff;
  padding: 6px 10px;
  font-size: 12px;
  cursor: pointer;
  user-select: none;
  transition: transform .05s ease, opacity .2s ease;
}
.copy:active { transform: scale(.97); }

.hint { font-size: 12px; color: var(--muted); margin-top: 10px; }

@media (min-width:640px) {
  h1 { font-size: 24px; }
  p { font-size: 15px; }
  code { font-size: 15px; }
}
</style>
</head>
<body>
<div class="container">
  <div class="brand">
    <div class="brand-text">Ancient Hub</div>
  </div>
  <div class="editor" aria-label="Read-only code editor" role="region">
    <button aria-label="Copy code" class="copy" title="Copy">Copy</button>
    <pre><code class="lua" id="code"></code></pre>
  </div>
  <div class="hint"></div>
</div>

<script>
const luaSource = `print("HELLO")`;

function escapeHTML(str) {
  return str.replace(/[&<>]/g, ch => ({ "&": "&amp;", "<": "&lt;", ">": "&gt;" }[ch]));
}

function highlightLua(code) {
  let t = escapeHTML(code);
  const strRegex = /"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'/g;
  const parts = [];
  let lastIndex = 0, m;

  while (m = strRegex.exec(t)) {
    if (m.index > lastIndex) parts.push({ type: "code", value: t.slice(lastIndex, m.index) });
    parts.push({ type: "str", value: m[0] });
    lastIndex = m.index + m[0].length;
  }
  if (lastIndex < t.length) parts.push({ type: "code", value: t.slice(lastIndex) });

  const kwRegex = /\b(local|function|end|if|then|else|elseif|for|while|repeat|until|return|not|and|or|do|in|true|false|nil)\b/g;
  const numRegex = /\b\d+(\.\d+)?\b/g;
  const builtInRegex = /\b(loadstring|game|HttpGet)\b/g;

  function colorize(str) {
    return str.replace(numRegex, `<span class="num">$&</span>`)
              .replace(kwRegex, `<span class="kw">$&</span>`)
              .replace(builtInRegex, `<span class="kw">$&</span>`);
  }

  return parts.map(p => {
    if (p.type === "str") return `<span class="str">${p.value}</span>`;
    return p.value.split("\n").map(line => {
      const commentIndex = line.indexOf("--");
      if (commentIndex === -1) return colorize(line);
      return colorize(line.slice(0, commentIndex)) + `<span class="com">${line.slice(commentIndex)}</span>`;
    }).join("\n");
  }).join("");
}

const codeEl = document.getElementById("code");
codeEl.innerHTML = highlightLua(luaSource);

function flash(msg) {
  const btn = document.querySelector(".copy");
  const original = btn.textContent;
  btn.textContent = msg;
  setTimeout(() => btn.textContent = original, 900);
}

document.querySelector(".copy").addEventListener("click", async () => {
  try {
    await navigator.clipboard.writeText(luaSource);
    flash("Copied!");
  } catch {
    const textarea = document.createElement("textarea");
    textarea.value = luaSource;
    document.body.appendChild(textarea);
    textarea.select();
    try { document.execCommand("copy"); flash("Copied!"); } catch {}
    textarea.remove();
  }
});
</script>
</body>
</html>
