local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")

local player = Players.LocalPlayer
local Icon = require(ReplicatedStorage:WaitForChild("Packages"):WaitForChild("TopbarPlus"))

local platform
local offset = 2
local lerpSpeed = 1
local connection
local floatButton
local destroyButton

local function createPlatform()
    local part = Instance.new("Part")
    part.Size = Vector3.new(6, 1, 6)
    part.Anchored = true
    part.CanCollide = true
    part.Color = Color3.fromRGB(255, 200, 0)
    part.Name = "FloatPlatform"
    part.Transparency = 0.5
    part.Parent = workspace
    return part
end

local function togglePlatform(enable)
    if enable then
        local hrp = player.Character and player.Character:FindFirstChild("HumanoidRootPart")
        if not hrp then
            hrp = player.CharacterAdded:Wait():WaitForChild("HumanoidRootPart")
        end
        platform = createPlatform()
        connection = RunService.RenderStepped:Connect(function()
            if platform and hrp then
                local targetPos = hrp.Position - Vector3.new(0, offset, 0)
                platform.CFrame = platform.CFrame:Lerp(CFrame.new(targetPos), lerpSpeed)
            end
        end)
    else
        if platform then
            platform:Destroy()
            platform = nil
        end
        if connection then
            connection:Disconnect()
            connection = nil
        end
    end
end

floatButton = Icon.new()
floatButton:setLabel("Float (F)")
floatButton:setRight()
floatButton:bindToggleKey(Enum.KeyCode.F)

floatButton.selected:Connect(function()
    togglePlatform(true)
end)

floatButton.deselected:Connect(function()
    togglePlatform(false)
end)

destroyButton = Icon.new()
destroyButton:setLabel("Destroy (B)")
destroyButton:setRight()
destroyButton:bindToggleKey(Enum.KeyCode.B)

destroyButton.selected:Connect(function()
    togglePlatform(false)
    if floatButton then floatButton:destroy() end
    if destroyButton then destroyButton:destroy() end
end)

print("[Ancient Hub] Steal a Brainrot Loaded!")
